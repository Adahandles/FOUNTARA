<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fountara — Water & Sod • Pay with WTR / ADA</title>

<!-- Social preview -->
<meta property="og:title" content="Fountara — Water & Sod • Pay with WTR / ADA" />
<meta property="og:description" content="Order potable bulk water or sod. Reserve Water Bank storage by gallon or by case. Pay with Water Token (WTR) or ADA on Cardano." />
<!-- Updated: og:image now points to the relocated asset in assets/img -->
<meta property="og:image" content="assets/img/wtrcoin.png" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Fountara — Water & Sod" />
<meta name="twitter:description" content="Reserve storage & schedule delivery. Pay with WTR / ADA." />
<!-- Updated: twitter:image now points to the relocated asset -->
<meta name="twitter:image" content="assets/img/wtrcoin.png" />

<link rel="icon" href="./Flogo.jpg" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />

<style>
:root{
  --bg1:#001018;--bg2:#00243a;--bg3:#0b1930;
  --cyan:#6cf;--cyan2:#8cf;--txt:#eaf1fb;--muted:#a7b6c7;--card:rgba(0,0,0,.25)
}
*{box-sizing:border-box}
body{
  margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--txt);
  background:linear-gradient(270deg,var(--bg1),var(--bg2),var(--bg3),var(--bg1));
  background-size:600% 600%;animation:aurora 22s ease infinite;overflow-x:hidden
}
@keyframes aurora{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.wrap{max-width:1100px;margin:0 auto;padding:2rem 1rem}
.section-title{font-size:clamp(1.9rem,3vw,2.6rem);margin:0 0 .8rem}
.muted{color:var(--muted)}
.token-box{background:var(--card);border:1px solid #ffffff22;border-radius:16px;padding:1rem;margin-bottom:1rem;box-shadow:0 0 18px rgba(108,207,255,.15)}
.card{background:var(--card);border:1px solid #ffffff22;border-radius:14px;padding:1rem;box-shadow:0 0 18px rgba(108,207,255,.15)}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
@media(max-width:920px){.grid2,.grid3{grid-template-columns:1fr}}
.input{width:100%;padding:.8rem;border:1px solid #ffffff2a;background:#0005;color:#fff;border-radius:12px}
label{font-weight:600;font-size:.95rem}
.small{font-size:.9rem}
.kv{display:flex;justify-content:space-between;gap:.5rem}
.flex{display:flex;gap:.6rem;flex-wrap:wrap}
.center{display:flex;justify-content:center;align-items:center}

/* Buttons & Tabs */
.btn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:1rem 1.5rem;border-radius:14px;border:2px solid var(--cyan2);
  background:linear-gradient(180deg,rgba(108,207,255,.25),rgba(108,207,255,.1));
  color:#fff;font-weight:600;font-size:1rem;letter-spacing:.4px;
  box-shadow:0 0 22px rgba(108,207,255,.35);cursor:pointer;transition:all .25s ease
}
.btn:hover{background:linear-gradient(180deg,rgba(108,207,255,.4),rgba(108,207,255,.2));box-shadow:0 0 32px rgba(108,207,255,.55);transform:translateY(-1px)}
.btn.secondary{border-color:#fff4;background:linear-gradient(180deg,rgba(255,255,255,.1),rgba(255,255,255,.05));color:#fff}
.btn.secondary:hover{box-shadow:0 0 26px rgba(255,255,255,.35)}
/* Icons within buttons */
.btn img{height:20px;width:20px;margin-right:.5rem;border-radius:3px;}
.tab{color:#fff;font-weight:600;background:rgba(255,255,255,.08);border-radius:12px;border:1px solid #ffffff33;padding:.6rem 1rem;cursor:pointer;transition:all .2s ease}
.tab:hover,.tab.active{background:rgba(255,255,255,.18);box-shadow:0 0 18px rgba(108,207,255,.4)}

/* Hero */
header.hero{min-height:62vh;display:grid;place-items:center;text-align:center;padding:4rem 1rem 2rem}
.hero-inner{max-width:960px}
.logo{width:340px;height:340px;border-radius:50%;object-fit:cover;border:3px solid #fff;box-shadow:0 0 26px var(--cyan2);transition:transform .4s ease, box-shadow .4s ease;animation:pulse 3.2s ease infinite}
.logo:hover{transform:scale(1.03) rotate(2deg);box-shadow:0 0 60px var(--cyan)}
@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 18px rgba(108,207,255,.15)}50%{transform:scale(1.03);box-shadow:0 0 36px rgba(108,207,255,.15)}100%{transform:scale(1);box-shadow:0 0 18px rgba(108,207,255,.15)}}
h1{font-size:clamp(2.3rem,4vw,3.4rem);margin:.8rem 0 .4rem}
.tag{color:var(--muted);font-size:1.05rem;margin:0 auto 1.1rem;max-width:720px}

/* Copy pill + footer */
.copy{padding:.35rem .55rem;border-radius:9px;border:1px solid #ffffff33;background:#ffffff1a;color:#fff;cursor:pointer}
footer{color:var(--muted);text-align:center;padding:2rem 1rem}
</style>
</head>
<body>

<!-- HERO -->
<header class="hero">
  <div class="hero-inner">
    <!-- Updated: logo src now references assets/img/wtrcoin.png -->
    <img class="logo" src="assets/img/wtrcoin.png" alt="Water Token (WTR) coin" />
    <h1>Fountara</h1>
    <p class="tag">Potable water & farm-fresh sod. Reserve <strong>Water Bank</strong> storage & schedule delivery. Pay with <strong>WTR</strong> or <strong>ADA</strong>.</p>
    <div class="flex center">
      <a href="#order" class="btn">Start Order</a>
      <a href="#waterbank" class="btn">Water Bank</a>
      <a href="#pay" class="btn">Checkout</a>
      <a href="tokenomics.html" class="btn secondary">Tokenomics</a>
      <a href="stake.html" class="btn secondary">Stake</a>
      <a href="bond.html" class="btn secondary">Bond</a>
      <a href="earn.html" class="btn secondary">Earn</a>
      <a href="orange-springs-overview.html" class="btn secondary">Orange Springs</a>
    </div>
  </div>
</header>

<!-- BRAND STRIP -->
<section class="wrap" style="padding-top:0">
  <div class="token-box" style="display:grid;grid-template-columns:1.2fr .8fr;gap:1rem;align-items:center">
    <div>
      <!-- Embed official Fountara logo directly -->
      <img src="data:image/png;base64,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" alt="Fountara Spring Water" style="height:72px;object-fit:contain;filter:drop-shadow(0 0 8px rgba(108,207,255,.25))" />
      <p class="muted" style="margin:.6rem 0 0">Florida-built, nationwide vision: water logistics + Water Bank reserves. Crypto-friendly via WTR / ADA.</p>
    </div>
    <div style="display:flex;gap:.6rem;justify-content:flex-end;flex-wrap:wrap">
      <!-- Updated: Use new water tanker and sod delivery images from the assets/img folder -->
      <img src="assets/img/file_0000000072e4622fb917ac627add3e18.png" alt="Water tanker" style="height:100px;border-radius:12px;border:1px solid #ffffff22" />
      <img src="assets/img/file_000000008d1061f7bff030ba34788383.webp" alt="Sod delivery" style="height:100px;border-radius:12px;border:1px solid #ffffff22" />
    </div>
  </div>
</section>

<!-- ORDER SECTION -->
<div class="wrap" id="order">
  <h2 class="section-title">Order Water or Sod</h2>
  <div class="grid2">
    <div class="card">
      <label>Product</label>
      <select class="input" id="product">
        <option value="water">Bulk Potable Water</option>
        <option value="sod">Farm-fresh Sod</option>
      </select>
      <div class="kv small" style="margin-top:.8rem">
        <span>Tank / Pallets</span>
        <input class="input" id="qty" type="number" min="1" value="1" />
      </div>
      <div class="kv small" style="margin-top:.8rem">
        <span>Delivery distance (miles)</span>
        <input class="input" id="miles" type="number" min="0" value="10" />
      </div>
      <div class="flex" style="margin-top:1rem">
        <button class="btn" onclick="addToCart()">Add to Cart</button>
      </div>
    </div>
    <div class="card" id="quote">
      <h3 style="margin-top:0">Live Quote</h3>
      <div class="small muted">Estimates update as you change inputs.</div>
      <div id="quoteOut" style="margin-top:.8rem"></div>
    </div>
  </div>
</div>

<!-- WATERBANK SECTION -->
<div class="wrap" id="waterbank">
  <h2 class="section-title">Water Bank</h2>
  <div class="card">
    <p class="small">Reserve storage by entering the number of gallons. Convert reservations to deliveries any time.</p>
    <!-- New input fields for Water Bank reservations -->
    <div class="grid2">
      <label>Gallons to Reserve
        <input id="reserve_gal" class="input" type="number" placeholder="Gallons" min="1" />
      </label>
      <label>Bank Branch
        <select id="bank_branch" class="input">
          <option value="orange">Orange Springs Bank</option>
          <option value="black">Black Sink Bank</option>
          <option value="moss">Moss Bluff Bank</option>
        </select>
      </label>
    </div>
    <div class="grid2" style="margin-top:1rem">
      <label>Water Bank Action
        <select id="wb_action" class="input" onchange="toggleDestination()">
          <option value="pickup">Pickup (customer pickup)</option>
          <option value="delivery">Delivery (by Fountara)</option>
        </select>
      </label>
      <label id="dest_label" style="display:none;">Destination Address
        <input id="wb_destination" class="input" type="text" placeholder="Delivery address or location" />
      </label>
    </div>
    <div class="flex" style="margin-top:1rem">
      <button class="btn secondary" onclick="reserve()">Reserve</button>
      <button class="btn secondary" onclick="redeem()">Redeem</button>
    </div>
    <!-- Display distance and token reward -->
    <div id="wb_info" class="small" style="margin-top:0.5rem;color:var(--muted)"></div>
  </div>
  <!-- Wallet connect and new reserves summaries -->
  <div class="card" style="margin-top:1rem;">
    <!-- Wallet connect section -->
    <div id="walletConnect" style="margin-bottom:1rem;">
      <button class="btn" onclick="connectWallet()">Connect Wallet</button>
      <select id="walletDropdownConnect" class="input" style="display:none;margin-top:.5rem"></select>
    </div>
    <!-- Fountara Water Bank summary -->
    <div class="card" style="margin-top:0;">
      <h3>Fountara Water Bank Reserves</h3>
      <div class="kv"><span class="muted">Tanker Gallons Reserved</span><span><strong id="bank_tanker_gal">0</strong> gal • <strong id="bank_tanker_wtr">0</strong> WTR</span></div>
      <div class="kv"><span class="muted">Canned Gallons Reserved</span><span><strong id="bank_canned_gal">0</strong> gal • <strong id="bank_canned_wtr">0</strong> WTR</span></div>
      <div class="kv"><span class="muted">Bagged Gallons Reserved</span><span><strong id="bank_bagged_gal">0</strong> gal • <strong id="bank_bagged_wtr">0</strong> WTR</span></div>
      <div class="kv"><span class="muted">Total Gallons Reserved</span><span><strong id="bank_total_gal">0</strong> gal • <strong id="bank_total_wtr">0</strong> WTR</span></div>
    </div>
    <!-- My Water Bank summary -->
    <div class="card" style="margin-top:1rem;">
      <h3>My Water Bank Reserves</h3>
      <div class="kv"><span class="muted">Tanker Gallons Reserved</span><strong id="my_tanker_gal">0</strong></div>
      <div class="kv"><span class="muted">Canned Gallons Reserved</span><strong id="my_canned_gal">0</strong></div>
      <div class="kv"><span class="muted">Bagged Gallons Reserved</span><strong id="my_bagged_gal">0</strong></div>
      <div class="kv"><span class="muted">Total Gallons Reserved</span><strong id="my_total_gal">0</strong></div>
    </div>
  </div>

  <!-- Gallery Section showcasing Fountara operations -->
  <div class="wrap" style="margin-top:2rem;">
    <h2 class="section-title">Our Operations</h2>
    <div class="grid3" style="margin-top:1rem;">
      <!-- Emergency preparedness & disaster response -->
      <img src="assets/img/file_00000000453c61f7b25053a180839caa.png" alt="Emergency preparedness" style="width:100%;border-radius:12px;object-fit:cover" />
      <!-- Fountara water tanker -->
      <img src="assets/img/file_0000000072e4622fb917ac627add3e18.png" alt="Fountara water tanker" style="width:100%;border-radius:12px;object-fit:cover" />
      <!-- Farm-fresh sod delivery -->
      <img src="assets/img/file_000000008d1061f7bff030ba34788383.webp" alt="Sod delivery" style="width:100%;border-radius:12px;object-fit:cover" />
      <!-- Additional images -->
      <img src="assets/img/file_00000000a5e061f7b48f55f1b9356c1d.png" alt="Operations Image 4" style="width:100%;border-radius:12px;object-fit:cover" />
      <img src="assets/img/file_00000000ac0061f8b424cf2598ce0417.png" alt="Operations Image 5" style="width:100%;border-radius:12px;object-fit:cover" />
    </div>
  </div>
</div>

<!-- CHECKOUT SECTION -->
<div class="wrap" id="pay">
  <h2 class="section-title">Checkout • WTR / ADA</h2>
  <div class="grid2">
    <div class="card">
      <label>Pay with</label>
      <div class="flex" style="margin-top:.5rem">
        <button class="btn" onclick="setPay('WTR')">Water Token (WTR)</button>
        <button class="btn" onclick="setPay('ADA')">ADA</button>
      </div>
      <p class="small muted" style="margin-top:.8rem">Handles supported: <strong>$Waterpay</strong>, <strong>$homeyield</strong>.</p>
      <!-- Wallet payment method selector -->
      <div style="margin-top:.8rem;">
        <label for="walletDropdown" class="small muted">Select Cardano wallet</label>
        <select id="walletDropdownCheckout" style="width:100%;margin-top:.3rem;padding:.4rem;border-radius:.5rem;display:none;"></select>
      </div>
      <!-- Alternative payment buttons -->
      <div class="flex" style="margin-top:.8rem;flex-wrap:wrap;gap:.5rem;">
        <button class="btn secondary"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEzklEQVR4nM2XW2xUVRSGv31uM73QTmuHlkKAWoIkRIVI0prQ+ECAxAcRSUQSQ4gvxgSefRCNeEl8M8QmSkiMkURMVESeDBWIBkGlgNHUBJC2BFpoh850Or1Mz2VvH87cTmcOrUZTV3KS2Xuvvda/LnutNUIppVhE0hZT+f8CgPF3mCezkl9vZbl6K8tAwiE97QEQq9Zpi5tsWBVlw6ootdGF27UgACNpl09+SHOid4KBhIPtKQQghABAKYUCLF3QFjfZuWkJ+7pitMTmFy/mS8Ivfp7g3VP3GUw4WIZA1wUihFcBnqewXcWqJpPXnmni+c66fwbAk/DOyQQf9KTQBBh6mNrK5HoKqeDA1gYOPhtHD4lKqI/eOpHg8OkkVZaGKNGdRzsfHEMXKAXvf5tEKji0K16RryKu4xfSdH9XVK6Ub5HrKaT0v7luk7LI4+V4hIAqS6O7J8lnF9IVAZSFYCjlsu29WyQyHoYumHUVL3TUsaezDgQYmiCT9ThwbITxKQ9NEyileHtXnEeWRXyrNDjbN8Xh00ksQ8OViqZandOvrmRFoxn01FxER8+lGEq5VEd85wjg7rjL5nXVAb6WuvuMTXpowKyjiFXrdJXwTGYledMMTTCccjl6brwsFIEQpKY8Tl7OEDGLETY0+P1OlqGkE7jYXG8gpa9BAY4XDMpwykWWbEVMwTeXM6SmvHAAv9yc4U7SCWSspgnGpyQ3RuzAxeWNJlL5NSBqCNa0WIHzi3/O5JJXAQpdgzsph0v9M+EAegeyeBLm5rgrFdfuBgGsbPSj50lYHbdYvzxSOBtJu5y/Po2pi4AsV0JvfzYcwMCoHXhypXR9DoAVD5kIAbanePrxmkLOAJzszXB33EXX8sJ8IJqA/tGgnEASTszIiu9b0wT9ieDF1gYDXRMssQS7O+sL+9OzkmM/pnOFqzQv/AqanpFB2aWLMOt14SfVtF283FxnoAnY/mgta5cV43/qSoY/hmdz7i+lyhU/ACBWo1OpMGsajE16jGWKGdxQo9MaM3hlS0Nhb8aWfHQ2hR5iiQJi1cHaF1itabYq4PQ732RWMpxyC7sRU7B/awMbV0cLe1/9kuG327OYIQVeKl9HKICO9qoKrhMIIbBdxeD9Yi2otjReeqpofXrao7sniaEFM7/0t6kLOtZUhQN4oi1K+1KzrKiA777SDBYimDMffz/OtXv2nK5Z8gQ9eDhusqntAQBqIhp7nqzHccsBCAH9o07ZPsDtMYcjZ8exjPAeabuK3Z11ZdNSWbT2bq7n+MU0N0acgEBdE1y/N8uVwSyaIPcJhIDuniSjGZeoWbnpOy6sbbHY1xUrN6zSQHKmb4oXPxxCKb8G5CnPKUSutOSOHE+VFJ0gSaVQCj59uZXtj9WWnVeEvGV9DW/ujONKCg0nrzgPRCq/DHvywcodV/H6jqaKymGemfDImRSHvk5gezwgvnNnJH9tu34nPbijif3bGsNUzD+Unumb4o0vE/TlqptRNpQWASgUrgeOq1jXanHouXio5QsGAP4bP3Y+zec/TXBjxGbWVYEcUMqHETEE7UstdnfUsbernoYafT7RCwOQpxlbcnUwy6WBLDdH7MJw0VCj095ssaktysZV0UBn/FcB/Be06P8NFx3AX5PpFfsVavijAAAAAElFTkSuQmCC" alt="Venmo logo"/>Venmo</button>
        <button class="btn secondary"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFhUlEQVR4nMWXaWxUVRTHf/e9N1sXytIyUChQoZayCC0iYFBWE4JGA0gMQjBIREVZon4xonGJ3zSgIdEgxoAsSb8YCIEPshiWsFNAEAq1ZSmlpXSbDjOdNzPv+uG9WV5fwTYh4SQ3b959957zP+f8zz13hJRS8gRFeZLGAbSeLK5raON4xW1O/11LdW0rbe0dCCHom+NjeEEfJo4dxKTxBfhzsx8vgJPnb7Hx9xPsO1JF0/0gGBKEMIeUIDGfqoLfn80r059m5ZJJlI0e9L+6xaM40NIWYt36/WwuP4seioJbBUUktlpPaX83DNBj+LI8vLtoIl+unkVOtrfnACqrG3nzo3LOVdSC12V6yyP4KoT12YqOISEc5bmJQ9j2/UKKhuV2H0BlTSNzl2+luqbJNJ5QDBA3usYhhBkdIVLBAQhHGTEil72/LqVoqBOEA0BrIMzMpb9RcaHWYVxRBIP9vVAVgRAiSQOAiB6nqTVEqK0DNAVU1YoGEI4xoayAA1uWOdLhALDqmz1s3HwMMtzmRAKAHmfOrGLKN7yBoggEIETK1WgsTsP9IH8ereK7X49Rc6vZ5IxpBkI6a1ZMZcNnL9sA2M6Bs5fusGnnactzaY600L8wYQjZmR4yfW4yfG58Xldy9MryUjQsl5VLJnNo29uMLMqDqJGqEK/GzztOU/FP3cMBbNhyHD2kW0xPDEs0hbJR+bbNhiHR9RidZeigPnz2/jSzIpKxFkSCEX7YerxrAPWN7ew9fA3cWlreLe8NSWaOj5LhebbN76z7g3FzfmTm4s0OzyaNK8CT5bET1qOx56/r3GsKOgEcr7hFc2PQ8r4TzQ1J4aAc8v29klOBYAd7D1dxtfo+hw5W8vPOU7YtLk1FVRW7LkXQdK+dE+dvOwGcuVwHcYm9hiyJG4wp8uPS1ORU1Y0m6hsC5nJVYXzJQNuW+vvtdIR0Z1nGDc5dTkUreRTX1LY4vU+8SsmzY+z5b2oLUTK0LxmZHubNGc3yhc/avu87fB0jEjMJnS5CUHOnxQkgEIx0spomLpXSUXYPZ00Zwfl9q9E0FUXYo1ZZ3chPO06ZfKKTOgFtSVtpKVCVtLM9ETYJGJKc3hmMLLQTUFEEbpfmMH7x6l0WfLiTxiSfnKIqqeJLRiCvb6ZV9xaIxM+4wfDBvfHnZtmUdESiGIbEkJIHIZ1/bzaz68AVfik/Q0tzOO0Q6iRS0r9fphNAyfC8lNH0BheXPDNygMVoU85dvsOiteVELQDBkE5TSwgiMTPsDzNu6R6dVs5JAM+XFiC8mmlbpKUDJwGPnr3JtSv1Vpck1Yg6E64L42qGiymlBcmppFulo/IZVdQfYoZtg/BolHYqsbOX60BTraajPDTXDonFGVPsZ2xxSl8SgNfjYvnrZRCNp245hiSvXxYjn7IT8GJlA6jdNGoDYLB8QRluVypFtl6wbH4ZI4r7myCECcCfm4mUktZAmNZAmFMXb1N1s9n0vicSjVNcMoC35pXaph3teNeBK8x/bzuGooAATVXI7eNLtt72BzrBB5E0nnRDDIkK7N60hLnTi22fHG68NquET1dOg44oSIjFDeobgtytb+dufTvBYA+NS0CP8fnqGQ7jXQIA+HrNbNasmAqRqHm3U0VqdJdwYF7f9BifrJzGFx/M6HLJI2/F6387xufr9/MgEAGP1mWf6lIkEImSnePj249fYtXSKQ9d+kgAAGcu1fLlhoPsO3IdoyMGLtUsvc5gpDS7aTSO4tWY+2IRX62dTdno/C71dhtAQo6crmH77gscPFnDzboAelg30wOgCNw+F0MH5jBzciGLXx3HCxMLu6O2+wASEgrr3Kht4dbdNloDYQB6Z3spyO9N4eA+ZPjcPVHXcwCPW574v+P/ABWiOeMfjkC9AAAAAElFTkSuQmCC" alt="PayPal logo"/>PayPal</button>
        <button class="btn secondary"><img src="data:image/png;base64,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" alt="Cash App logo"/>Cash App</button>
        <button class="btn secondary"><img src="assets/images/chime_logo.png" alt="Chime logo"/>Chime</button>
        <button class="btn secondary"><img src="assets/images/zelle_logo.png" alt="Zelle logo"/>Zelle</button>
        <button class="btn secondary">Card</button>
      </div>
    </div>
    <div class="card">
      <h3 style="margin-top:0">Cart</h3>
      <div id="cartOut" class="small"></div>
      <div class="flex" style="margin-top:1rem">
        <button class="btn">Generate Payment QR</button>
        <button class="btn secondary">Save Quote</button>
      </div>
    </div>
  </div>
</div>

<script>
let pay='WTR', cart=[];
// Track reserves
let reserved_gal=0, reserved_cases=0, reserved_tankers=0, reserved_credit=0;
let reserved_rights=0, reserved_bagged_cans=0; // new counters for rights and bagged/cans
// Payment method variable (unused placeholder to maintain backward compatibility)
let paymentMethod='echk';
// Additional counters for Fountara and user reserves by category
let bank_tanker_gal=0, bank_canned_gal=0, bank_bagged_gal=0;
let my_tanker_gal=0, my_canned_gal=0, my_bagged_gal=0;
function price(product, qty, miles){
  const base = product==='water' ? 180 : 220;        // example per-unit baseline
  const haul = Math.max(0, miles)*3.5;               // per-mile
  return Math.round((base*qty + haul)*100)/100;
}
function renderQuote(){
  const p=document.getElementById('product').value;
  const q=+document.getElementById('qty').value||1;
  const m=+document.getElementById('miles').value||0;
  const total=price(p,q,m);
  document.getElementById('quoteOut').innerHTML =
    `<div class="kv"><span>Product</span><strong>${p}</strong></div>
     <div class="kv"><span>Quantity</span><strong>${q}</strong></div>
     <div class="kv"><span>Miles</span><strong>${m}</strong></div>
     <hr style="border-color:#ffffff22">
     <div class="kv"><span>Total Estimate</span><strong>${total} USD eq.</strong></div>`;
}
function addToCart(){
  const p=document.getElementById('product').value;
  const q=+document.getElementById('qty').value||1;
  const m=+document.getElementById('miles').value||0;
  cart.push({p,q,m,t:price(p,q,m)});
  renderCart();
}
function renderCart(){
  if(!cart.length){document.getElementById('cartOut').innerHTML='Empty';return;}
  document.getElementById('cartOut').innerHTML = cart.map((it,i)=>
    `${i+1}. ${it.p} ×${it.q} • ${it.m} mi — <strong>${it.t}</strong>`
  ).join('<br>');
}
function setPay(x){pay=x;}
// Connect a wallet: reveal dropdown with sample Cardano wallets
function connectWallet(){
  // Populate all wallet dropdowns (connect section and checkout)
  const wallets = [
    'Daedalus','Yoroi','Lace','Eternl','Typhon','Vespr','ADALite','NuFi','Gero','LodeWallet','Coin Wallet','ADAWallet','Atomic','Gem','Trust','Exodus','Nami','Flint'
  ];
  let html = '<option value="">Select wallet</option>';
  wallets.forEach(function(w){ html += `<option value="${w}">${w}</option>`; });
  ['walletDropdownConnect','walletDropdownCheckout'].forEach(function(id){
    const s = document.getElementById(id);
    if(s){
      s.innerHTML = html;
      s.style.display = '';
    }
  });
}
// Show or hide destination field based on action selection
function toggleDestination(){
  const action=document.getElementById('wb_action') ? document.getElementById('wb_action').value : '';
  const label=document.getElementById('dest_label');
  if(label){
    label.style.display = action === 'delivery' ? '' : 'none';
  }
}

// Fetch coordinates for an address using Nominatim (may require User-Agent)
async function getCoordinates(address){
  try {
    const url='https://nominatim.openstreetmap.org/search?format=json&limit=1&q='+encodeURIComponent(address);
    const res=await fetch(url, { headers: { 'User-Agent': 'Mozilla/5.0' }});
    const data=await res.json();
    if(data && data.length>0){
      return { lat: parseFloat(data[0].lat), lon: parseFloat(data[0].lon) };
    }
  } catch(err){}
  return null;
}

// Compute distance between two lat/lon points using the haversine formula (miles)
function haversineDistance(lat1, lon1, lat2, lon2){
  const R=3958.8; // Earth radius in miles
  const dLat=(lat2-lat1) * Math.PI / 180;
  const dLon=(lon2-lon1) * Math.PI / 180;
  const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;
  const c=2*Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R*c;
}

// Calculate round-trip distance from Orange Springs, FL to a destination
async function calculateDistance(address){
  const coords=await getCoordinates(address);
  if(!coords){ return null; }
  const ORANGE_LAT=29.5060816;
  const ORANGE_LON=-81.9453664;
  const d=haversineDistance(ORANGE_LAT, ORANGE_LON, coords.lat, coords.lon);
  return d*2;
}
async function reserve(){
  // get number of gallons from input
  const gInput=document.getElementById('reserve_gal');
  const g= gInput ? parseFloat(gInput.value) : null;
  if(!g || g <= 0){ alert('Please enter a valid number of gallons.'); return; }
  const branch=document.getElementById('bank_branch') ? document.getElementById('bank_branch').value : '';
  const actionSelect=document.getElementById('wb_action');
  const action=actionSelect ? actionSelect.value : '';
  const dest=document.getElementById('wb_destination') ? document.getElementById('wb_destination').value.trim() : '';

  // Build description
  let desc=`Reserve ${g} gal @ ${branch}`;
  if(action === 'delivery' && dest){ desc+=` to ${dest}`; }
  desc+=` (${action})`;

  // update reserves counters
  reserved_gal += g;
  reserved_rights += g;
  // categorize cases vs tankers based on amount
  if(g >= 5000){
    reserved_tankers += 1;
  } else {
    reserved_cases += 1;
  }
  // update bagged & cans: treat each reservation as one bagged & cans entry
  reserved_bagged_cans += 1;
  reserved_credit += g * 0.05;

  // classify reservation into tanker/canned/bagged categories and update totals
  if(g >= 5000){
    my_tanker_gal += g;
    bank_tanker_gal += g;
  } else if(g >= 1000){
    my_canned_gal += g;
    bank_canned_gal += g;
  } else {
    my_bagged_gal += g;
    bank_bagged_gal += g;
  }
  const my_total = my_tanker_gal + my_canned_gal + my_bagged_gal;
  const bank_total = bank_tanker_gal + bank_canned_gal + bank_bagged_gal;
  // update display for my reserves
  const myTankEl=document.getElementById('my_tanker_gal');
  const myCanEl =document.getElementById('my_canned_gal');
  const myBagEl =document.getElementById('my_bagged_gal');
  const myTotEl =document.getElementById('my_total_gal');
  if(myTankEl) myTankEl.textContent = my_tanker_gal;
  if(myCanEl)  myCanEl.textContent  = my_canned_gal;
  if(myBagEl)  myBagEl.textContent  = my_bagged_gal;
  if(myTotEl)  myTotEl.textContent  = my_total;
  // update display for Fountara reserves and WTR
  const bankTankEl=document.getElementById('bank_tanker_gal');
  const bankCanEl =document.getElementById('bank_canned_gal');
  const bankBagEl =document.getElementById('bank_bagged_gal');
  const bankTotEl =document.getElementById('bank_total_gal');
  const bankTankW=document.getElementById('bank_tanker_wtr');
  const bankCanW =document.getElementById('bank_canned_wtr');
  const bankBagW =document.getElementById('bank_bagged_wtr');
  const bankTotW =document.getElementById('bank_total_wtr');
  if(bankTankEl) bankTankEl.textContent = bank_tanker_gal;
  if(bankCanEl)  bankCanEl.textContent  = bank_canned_gal;
  if(bankBagEl)  bankBagEl.textContent  = bank_bagged_gal;
  if(bankTotEl)  bankTotEl.textContent  = bank_total;
  if(bankTankW) bankTankW.textContent = (bank_tanker_gal / 1000000).toFixed(6);
  if(bankCanW)  bankCanW.textContent  = (bank_canned_gal / 1000000).toFixed(6);
  if(bankBagW)  bankBagW.textContent  = (bank_bagged_gal / 1000000).toFixed(6);
  if(bankTotW)  bankTotW.textContent  = (bank_total / 1000000).toFixed(6);


  // Calculate WRE reward: 0.0001 WRE per 100 gallons
  const wre = (g / 100) * 0.0001;

  // Update information panel with tokens and distance (if applicable)
  const infoEl=document.getElementById('wb_info');
  if(infoEl) {
    infoEl.innerHTML = `WRE reward: <strong>${wre.toFixed(6)} WRE</strong>`;
  }

  // If delivery, calculate distance
  if(action === 'delivery' && dest){
    const dist = await calculateDistance(dest);
    if(dist !== null && infoEl){
      infoEl.innerHTML += `<br/>Approx. round trip distance: <strong>${dist.toFixed(2)} mi</strong>`;
    }
  }

  // Add to cart (reflect cost as credit only)
  cart.push({p:desc,q:1,m:0,t:g*0.05});
  renderCart();
}

// Redeem reserved gallons
function redeem(){
  const gInput = document.getElementById('reserve_gal');
  const g = gInput ? parseFloat(gInput.value) : null;
  if(!g || g <= 0){ alert('Please enter a valid number of gallons to redeem.'); return; }
  // Determine category and update counters
  if(g >= 5000){
    if(my_tanker_gal >= g){
      my_tanker_gal -= g;
      bank_tanker_gal -= g;
    } else { alert('Not enough tanker gallons reserved.'); return; }
  } else if(g >= 1000){
    if(my_canned_gal >= g){
      my_canned_gal -= g;
      bank_canned_gal -= g;
    } else { alert('Not enough canned gallons reserved.'); return; }
  } else {
    if(my_bagged_gal >= g){
      my_bagged_gal -= g;
      bank_bagged_gal -= g;
    } else { alert('Not enough bagged gallons reserved.'); return; }
  }
  const my_total = my_tanker_gal + my_canned_gal + my_bagged_gal;
  const bank_total = bank_tanker_gal + bank_canned_gal + bank_bagged_gal;
  // Update my reserves display
  const mt = document.getElementById('my_tanker_gal'); if(mt) mt.textContent = my_tanker_gal;
  const mc = document.getElementById('my_canned_gal'); if(mc) mc.textContent = my_canned_gal;
  const mb = document.getElementById('my_bagged_gal'); if(mb) mb.textContent = my_bagged_gal;
  const mtt= document.getElementById('my_total_gal'); if(mtt) mtt.textContent = my_total;
  // Update bank reserves and WTR display
  const bt  = document.getElementById('bank_tanker_gal'); if(bt)  bt.textContent  = bank_tanker_gal;
  const bc  = document.getElementById('bank_canned_gal'); if(bc)  bc.textContent  = bank_canned_gal;
  const bb  = document.getElementById('bank_bagged_gal'); if(bb)  bb.textContent  = bank_bagged_gal;
  const btt = document.getElementById('bank_total_gal'); if(btt) btt.textContent = bank_total;
  const btw = document.getElementById('bank_tanker_wtr'); if(btw) btw.textContent = (bank_tanker_gal / 1000000).toFixed(6);
  const bcw = document.getElementById('bank_canned_wtr'); if(bcw) bcw.textContent = (bank_canned_gal / 1000000).toFixed(6);
  const bbw = document.getElementById('bank_bagged_wtr'); if(bbw) bbw.textContent = (bank_bagged_gal / 1000000).toFixed(6);
  const bwt = document.getElementById('bank_total_wtr'); if(bwt) bwt.textContent = (bank_total / 1000000).toFixed(6);
  // Inform user of redemption
  const infoEl = document.getElementById('wb_info');
  if(infoEl){ infoEl.innerHTML = `<strong>Redeemed ${g} gallons.</strong>`; }
}
['product','qty','miles'].forEach(id=>document.getElementById(id).addEventListener('input',renderQuote));
renderQuote();
// Initialize destination visibility on page load
toggleDestination();
// Populate wallet dropdown on page load
connectWallet();
</script>

<!-- No payment method dropdown listener needed since wallets are buttons -->
<!-- EXPLORER & SOCIAL LINKS SECTION -->
<div class="wrap" id="explorers">
  <h2 class="section-title">Explorer & Social Links</h2>
  <div class="card">
    <div class="flex" style="flex-direction:column;gap:.6rem;">
      <a href="https://cardanoscan.io/token/7e159ba1d6ef752b5f3ba12a97f3b46a9706687b233341cc5f83d33b575452?address=addr1qx5849f4wn4xrl9rJvmwjz5xm9y29xxmdvcwuvk74tqnuzwrqdzj3qwwqvjhuwl4wtlrk4cd5la4rwtthxfk9a7aw5gsfgd9f3" class="btn secondary" target="_blank"><img src="assets/images/cardanoscan.png" alt="CardanoScan logo" style="height:20px;width:20px;margin-right:0.4rem;vertical-align:middle"/>CardanoScan</a>
      <a href="https://cexplorer.io/asset/asset1npw022evzyjh6xlz0cydt8qsa5ctplxnwuhxc2" class="btn secondary" target="_blank"><img src="assets/images/cexplorer.png" alt="CExplorer logo" style="height:20px;width:20px;margin-right:0.4rem;vertical-align:middle"/>CExplorer</a>
      <a href="https://adastat.net/tokens/7e159ba1d6ef752b5f3ba12a97f3b46a9706687b233341cc5f83d33b575452" class="btn secondary" target="_blank"><img src="assets/images/adastat.png" alt="ADAStat logo" style="height:20px;width:20px;margin-right:0.4rem;vertical-align:middle"/>ADAStat</a>
      <a href="https://pool.pm/asset1npw022evzyjh6xlz0cydt8qsa5ctplxnwuhxc2" class="btn secondary" target="_blank"><img src="assets/images/poolpm.png" alt="pool.pm logo" style="height:20px;width:20px;margin-right:0.4rem;vertical-align:middle"/>pool.pm</a>
      <a href="https://x.com/Fountara" class="btn secondary" target="_blank"><img src="assets/images/x_logo.png" alt="X logo" style="height:20px;width:20px;margin-right:0.4rem;vertical-align:middle"/>Fountara on X</a>
    </div>
  </div>
</div>


<!-- Verified on Cardano Footer -->
<footer style="color:var(--muted);text-align:center;padding:2rem 1rem">
  <div>Fountara • info@fountara.com</div>
  <div style="margin-top:0.5rem">
    <strong style="color:var(--cyan2)">Verified on Cardano</strong><br/>
    Policy ID: 7e159ba1d6ef752b5f3ba12a97f3b46a9706687b233341cc5f83d33b<br/>
    Fingerprint: asset1npw022evzyjh6xlz0cydt8qsa5ctplxnwuhxc2
  </div>
</footer>

</body>
</html>
