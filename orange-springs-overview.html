<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Orange Springs Overview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Use a consistent theme for all Orange Springs pages -->
  <style>
    :root {
      --bg1: #011723;
      --bg2: #012336;
      --bg3: #023042;
      --cyan: #00bcd4;
      --cyan2: #00a0bd;
      --green: #00c49a;
      --txt: #f0f4f8;
      --muted: #a0b4c5;
      --card: #042c3c;
    }
    /* Reset margins and set font */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: var(--txt);
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      line-height: 1.5;
    }
    /* Sticky navigation bar */
    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 20px;
      background: var(--bg3);
      position: sticky;
      top: 0;
      z-index: 10;
    }
    nav a {
      color: var(--txt);
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      background: linear-gradient(45deg, var(--cyan), var(--cyan2));
      border: 1px solid #ffffff33;
      transition: background .3s;
    }
    nav a:hover {
      background: linear-gradient(45deg, var(--cyan2), var(--cyan));
    }
    /* Page layout wrapper */
    .wrap {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: clamp(2rem, 4vw, 3rem);
      margin-top: 0;
    }
    .card {
      background: var(--card);
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 0 18px rgba(0,0,0,0.25);
      margin-bottom: 20px;
    }
    .card h2 {
      color: var(--cyan);
      margin-top: 0;
    }
    /* Map styling */
    /*
     * Map container styling
     *
     * Leaflet will dynamically add classes and inline styles to the map div at runtime.
     * Without an explicit height, the container collapses to 0 pixels high, causing
     * tiles to spill outside the page. Setting a fixed height here and hiding
     * overflow prevents that behaviour and keeps the map neatly contained.
     */
    #map {
      width: 100%;
      height: 500px;
      overflow: hidden;
      border-radius: 14px;
      border: 1px solid #ffffff22;
      box-shadow: 0 0 18px rgba(108,207,255,.15);
    }
    /* Ensure Leaflet's internal container expands to fill its parent */
    .leaflet-container {
      height: 100% !important;
      width: 100% !important;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <a href="index.html">Home</a>
    <a href="orange-springs-overview.html">Overview</a>
    <a href="orange-springs-history.html">History</a>
    <a href="orange-springs-scientific.html">Science &amp; Ecology</a>
    <a href="orange-springs-research.html">Research &amp; Development</a>
  </nav>
  <div class="wrap">
    <h1>Orange Springs Overview</h1>
    <!-- Hero image -->
    <img src="assets/img/orange-spring-1.jpg" alt="Orange Springs" style="width:100%; border-radius:14px;">
    <!-- Overview content -->
    <div class="card">
      <h2>About Orange Springs</h2>
      <p>
        Orange Springs is a natural mineral spring located in northeast Marion County, Florida.  Once the site of one of the state’s earliest health resorts, today the spring and its 67‑acre surroundings form the heart of Fountara’s sustainable spring‑water project.
      </p>
      <p>
        The spring discharges millions of gallons of water per day from the Floridan aquifer.  A consumptive‑use permit limits withdrawals to roughly 200,000 gallons daily, ensuring continued flow while allowing Fountara to bottle and distribute this water in recyclable aluminum cans.  By combining modern sustainability with a commitment to protecting Orange Springs’ natural heritage, we aim to preserve this vibrant resource for generations.
      </p>
    </div>
    <!-- Interactive map section -->
    <div class="card">
      <h2>Interactive Map</h2>
      <p>Explore the Orange Springs project area using the map below. Use the layer control to toggle basemaps and data layers.</p>
      <div id="map"></div>
    </div>
  </div>
  <!-- Leaflet and Esri Leaflet scripts for interactive map -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js" crossorigin=""></script>
  <script src="https://cdn.jsdelivr.net/npm/esri-leaflet@3.0.9/dist/esri-leaflet.js"></script>
  <script>
    // Initialize map centered on Orange Springs
    var map = L.map('map').setView([29.509, -81.944], 14);
    // Base layers
    var openStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    var topoLayer = L.esri.basemapLayer('Topographic');
    var satelliteLayer = L.esri.basemapLayer('Imagery');
    // Dynamic overlay layers
    var parcelsLayer = L.esri.dynamicMapLayer({
      url: 'https://gis.ocalafl.org/arcgis/rest/services/Public/Parcels/MapServer',
      opacity: 0.6
    });
    var floodLayer = L.esri.dynamicMapLayer({
      url: 'https://gis.marionfl.org/public/rest/services/General/Flood_Zones/MapServer',
      layers: [2, 3, 6, 7],
      opacity: 0.6
    });
    // Orange Springs parcels (GeoJSON) from MossBluffRestoration repo
    var orangeSpringsLayer;
    fetch('https://raw.githubusercontent.com/Adahandles/MossBluffRestoration/main/orangesprings.geojson')
      .then(function(resp) { return resp.json(); })
      .then(function(data) {
        orangeSpringsLayer = L.geoJSON(data, {
          style: function() {
            return { color: '#ff8c00', weight: 2, fillOpacity: 0.2 };
          },
          onEachFeature: function(feature, layer) {
            var props = feature.properties || {};
            var name = props.NAME || props.name || 'Orange Springs Parcel';
            var parcel = props.PARCEL || props.parcel || '';
            var acres = props.ACRES || props.acres || '';
            var info = '<strong>' + name + '</strong>';
            if (parcel) info += '<br/>Parcel: ' + parcel;
            if (acres) info += '<br/>Acres: ' + acres;
            layer.bindPopup(info);
          }
        });
        orangeSpringsLayer.addTo(map);
        layerControl.addOverlay(orangeSpringsLayer, 'Orange Springs Parcels');
        // Fit map to the parcels layer once loaded
        map.fitBounds(orangeSpringsLayer.getBounds());
      })
      .catch(function(err) {
        console.error('Failed to load Orange Springs parcels:', err);
      });
    // Set up base and overlay maps
    var baseMaps = {
      'OpenStreetMap': openStreetMap,
      'Topo (Esri)': topoLayer,
      'Satellite (Esri)': satelliteLayer
    };
    var overlayMaps = {
      'Parcel Boundaries': parcelsLayer,
      'Flood Zones': floodLayer
    };
    // Add dynamic overlays by default
    parcelsLayer.addTo(map);
    floodLayer.addTo(map);
    // Layer control
    var layerControl = L.control.layers(baseMaps, overlayMaps, { collapsed: false }).addTo(map);
  </script>
</body>
</html>